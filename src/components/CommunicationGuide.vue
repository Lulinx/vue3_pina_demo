<template>
  <div class="communication-demo">
    <h2>ğŸ”„ Vue3 ç»„ä»¶é€šä¿¡å®Œå…¨æŒ‡å—</h2>
    <p class="intro">æŒæ¡ 8 ç§ç»„ä»¶é€šä¿¡æ–¹å¼</p>

    <!-- é€šä¿¡æ–¹å¼å¯¹æ¯”è¡¨ -->
    <section class="comparison-section">
      <h3>ğŸ“Š é€šä¿¡æ–¹å¼å¯¹æ¯”è¡¨</h3>
      <div class="table-wrapper">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>é€šä¿¡æ–¹å¼</th>
              <th>æ–¹å‘</th>
              <th>ç”¨é€”</th>
              <th>é€‚ç”¨åœºæ™¯</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Props</strong></td>
              <td>çˆ¶ â†’ å­</td>
              <td>ä¼ é€’æ•°æ®</td>
              <td>ç®€å•çš„æ•°æ®ä¼ é€’</td>
            </tr>
            <tr>
              <td><strong>Emit</strong></td>
              <td>å­ â†’ çˆ¶</td>
              <td>è§¦å‘äº‹ä»¶</td>
              <td>å­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶</td>
            </tr>
            <tr>
              <td><strong>v-model</strong></td>
              <td>åŒå‘</td>
              <td>æ•°æ®ç»‘å®š</td>
              <td>è¡¨å•æ•°æ®çš„åŒå‘ç»‘å®š</td>
            </tr>
            <tr>
              <td><strong>Provide/Inject</strong></td>
              <td>çˆ¶ â†’ å­å­™</td>
              <td>ä¾èµ–æ³¨å…¥</td>
              <td>è·¨çº§ä¼ é€’ï¼ˆé¿å… props å±‚çº§è¿‡æ·±ï¼‰</td>
            </tr>
            <tr>
              <td><strong>Ref/Expose</strong></td>
              <td>åŒå‘</td>
              <td>ç›´æ¥è®¿é—®</td>
              <td>è®¿é—®å­ç»„ä»¶å®ä¾‹æ–¹æ³•å’Œå±æ€§</td>
            </tr>
            <tr>
              <td><strong>Slots</strong></td>
              <td>çˆ¶ â†’ å­</td>
              <td>å†…å®¹åˆ†å‘</td>
              <td>çµæ´»çš„å†…å®¹æ’å…¥</td>
            </tr>
            <tr>
              <td><strong>$attrs</strong></td>
              <td>çˆ¶ â†’ å­</td>
              <td>é€ä¼ å±æ€§</td>
              <td>å¤šçº§é€ä¼ ä¸éœ€è¦æ˜¾å¼å®šä¹‰çš„å±æ€§</td>
            </tr>
            <tr>
              <td><strong>Store</strong></td>
              <td>å…¨å±€</td>
              <td>å…¨å±€çŠ¶æ€</td>
              <td>è·¨ç»„ä»¶ã€è·¨é¡µé¢çš„çŠ¶æ€å…±äº«</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- 1. Props é€šä¿¡ -->
    <section class="demo-section">
      <h3>1ï¸âƒ£ Propsï¼ˆçˆ¶ â†’ å­ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> ç”¨äºä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æ–¹å¼</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> å•å‘æ•°æ®æµï¼Œå­ç»„ä»¶å¯ä»¥æ¥æ”¶ä½†ä¸èƒ½ä¿®æ”¹</p>
      </div>
      <div class="demo-content">
        <div class="props-demo">
          <input v-model="parentData.message" type="text" placeholder="è¾“å…¥æ¶ˆæ¯" class="input" />
          <input
            v-model.number="parentData.count"
            type="number"
            placeholder="è¾“å…¥æ•°å­—"
            class="input"
          />
          <div class="object-input">
            <input v-model="parentData.user.name" placeholder="ç”¨æˆ·å" class="input" />
            <input v-model="parentData.user.email" placeholder="é‚®ç®±" class="input" />
          </div>
        </div>
        <div class="child-container">
          <div class="comment">/* å­ç»„ä»¶æ¥æ”¶ Props */</div>
          <div class="child-demo">
            <p><strong>message:</strong> {{ parentData.message }}</p>
            <p><strong>count:</strong> {{ parentData.count }}</p>
            <p><strong>user:</strong> {{ parentData.user.name }} ({{ parentData.user.email }})</p>
          </div>
        </div>
      </div>
      <pre v-pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;æ¥æ”¶åˆ°çš„æ¶ˆæ¯: {{ message }}&lt;/p&gt;
    &lt;p&gt;æ¥æ”¶åˆ°çš„è®¡æ•°: {{ count }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å®šä¹‰æ¥æ”¶çš„ Props
defineProps({
  message: String,
  count: Number,
  user: Object
})
&lt;/script&gt;</code></pre>
    </section>

    <!-- 2. Emit é€šä¿¡ -->
    <section class="demo-section">
      <h3>2ï¸âƒ£ Emitï¼ˆå­ â†’ çˆ¶ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> å­ç»„ä»¶é€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> äº‹ä»¶é©±åŠ¨ï¼Œè§£è€¦æ€§å¼º</p>
      </div>
      <div class="demo-content">
        <div class="emit-demo">
          <button @click="handleChildEvent('Hello')" class="btn">å­ç»„ä»¶ï¼šå‘é€ 'Hello'</button>
          <button @click="handleChildEvent('Pinia')" class="btn">å­ç»„ä»¶ï¼šå‘é€ 'Pinia'</button>
          <button @click="handleChildEvent('Vue3')" class="btn">å­ç»„ä»¶ï¼šå‘é€ 'Vue3'</button>
          <p v-if="childMessage" class="received-message">
            ğŸ‘ˆ çˆ¶ç»„ä»¶æ”¶åˆ°: <strong>{{ childMessage }}</strong>
          </p>
        </div>
      </div>
      <pre><code>&lt;script setup&gt;
// å®šä¹‰å¯ä»¥å‘é€çš„äº‹ä»¶
const emit = defineEmits(['child-event'])

const sendMessage = (msg) => {
  // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯ä»¥é™„å¸¦æ•°æ®
  emit('child-event', msg)
}
&lt;/script&gt;

&lt;!-- åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬äº‹ä»¶ --&gt;
&lt;template&gt;
  &lt;ChildComponent @child-event="handleChildEvent" /&gt;
&lt;/template&gt;</code></pre>
    </section>

    <!-- 3. v-model åŒå‘ç»‘å®š -->
    <section class="demo-section">
      <h3>3ï¸âƒ£ v-modelï¼ˆåŒå‘ç»‘å®šï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> åœ¨ç»„ä»¶ä¸Šå®ç°åŒå‘æ•°æ®ç»‘å®š</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> è‡ªåŠ¨å¤„ç† Props å’Œ Emitï¼Œç®€åŒ–ä»£ç </p>
      </div>
      <div class="demo-content">
        <div class="vmodel-demo">
          <div class="form-group">
            <label>æ–‡ç« æ ‡é¢˜:</label>
            <input v-model="article.title" type="text" placeholder="è¾“å…¥æ ‡é¢˜" class="input" />
            <p class="char-count">å­—æ•°: {{ article.title.length }}/50</p>
          </div>
          <div class="form-group">
            <label>æ–‡ç« å†…å®¹:</label>
            <textarea v-model="article.content" placeholder="è¾“å…¥å†…å®¹" class="textarea"></textarea>
            <p class="char-count">å­—æ•°: {{ article.content.length }}/500</p>
          </div>
          <div class="preview">
            <h4>ğŸ“ å†…å®¹é¢„è§ˆ</h4>
            <div class="preview-content">
              <h5>{{ article.title || 'ï¼ˆæ ‡é¢˜æœªè¾“å…¥ï¼‰' }}</h5>
              <p>{{ article.content || 'ï¼ˆå†…å®¹æœªè¾“å…¥ï¼‰' }}</p>
            </div>
          </div>
        </div>
      </div>
      <pre><code>&lt;!-- å­ç»„ä»¶ä¸­å®ç° v-model --&gt;
&lt;script setup&gt;
const props = defineProps(['modelValue'])
const emit = defineEmits(['update:modelValue'])

const updateValue = (newValue) => {
  emit('update:modelValue', newValue)
}
&lt;/script&gt;

&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
&lt;template&gt;
  &lt;ChildComponent v-model="title" /&gt;
  &lt;!-- ç­‰åŒäº --&gt;
  &lt;ChildComponent :modelValue="title" @update:modelValue="title = $event" /&gt;
&lt;/template&gt;</code></pre>
    </section>

    <!-- 4. Provide/Inject ä¾èµ–æ³¨å…¥ -->
    <section class="demo-section">
      <h3>4ï¸âƒ£ Provide/Injectï¼ˆè·¨çº§ä¼ é€’ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> ç¥–å…ˆç»„ä»¶æä¾›æ•°æ®ï¼Œä»»ä½•åä»£ç»„ä»¶éƒ½å¯ä»¥æ³¨å…¥</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> é¿å… Props å±‚çº§è¿‡æ·±ï¼ˆProp Drillingï¼‰</p>
      </div>
      <div class="demo-content">
        <div class="provide-demo">
          <div class="provide-box">
            <h4>ç¥–å…ˆç»„ä»¶ (Provide)</h4>
            <p>æä¾›æ•°æ®: <input v-model="provideData.theme" class="input-small" /></p>
            <div class="nested-box" :style="{ backgroundColor: themeColor }">
              <p>ç¬¬ä¸€å±‚å­™ç»„ä»¶</p>
              <div class="nested-box-2" :style="{ backgroundColor: themeColorLight }">
                <p>ç¬¬äºŒå±‚å­™ç»„ä»¶</p>
                <div class="nested-box-3" :style="{ backgroundColor: themeColorLighter }">
                  <p>ç¬¬ä¸‰å±‚å­™ç»„ä»¶ - ç›´æ¥è®¿é—®ç¥–å…ˆæ•°æ®</p>
                  <p class="injected-value">
                    âœ“ æ³¨å…¥çš„ä¸»é¢˜: <strong>{{ provideData.theme }}</strong>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <pre><code>&lt;!-- åœ¨ç¥–å…ˆç»„ä»¶ä¸­æä¾›æ•°æ® --&gt;
&lt;script setup&gt;
import { provide } from 'vue'

const theme = ref('blue')
provide('theme', theme) // æä¾›å“åº”å¼çš„å€¼
&lt;/script&gt;

&lt;!-- åœ¨ä»»ä½•åä»£ç»„ä»¶ä¸­æ³¨å…¥ --&gt;
&lt;script setup&gt;
import { inject } from 'vue'

const theme = inject('theme', 'default') // ç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼
&lt;/script&gt;</code></pre>
    </section>

    <!-- 5. Ref/Expose ç›´æ¥è®¿é—® -->
    <section class="demo-section">
      <h3>5ï¸âƒ£ Ref/Exposeï¼ˆç›´æ¥è®¿é—®ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> çˆ¶ç»„ä»¶é€šè¿‡ Ref ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å®ä¾‹</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> å¼ºå¤§ä½†åº”è°¨æ…ä½¿ç”¨ï¼Œå®¹æ˜“ç ´åç»„ä»¶çš„å°è£…</p>
      </div>
      <div class="demo-content">
        <div class="ref-demo">
          <div class="controls">
            <button @click="callChildMethod('increment')" class="btn">è°ƒç”¨å­ç»„ä»¶é€’å¢</button>
            <button @click="callChildMethod('decrement')" class="btn">è°ƒç”¨å­ç»„ä»¶é€’å‡</button>
            <button @click="callChildMethod('reset')" class="btn">è°ƒç”¨å­ç»„ä»¶é‡ç½®</button>
          </div>
          <div class="result">
            <p>
              å­ç»„ä»¶å†…éƒ¨è®¡æ•°: <strong>{{ refDemoCounter }}</strong>
            </p>
            <p class="status">âœ“ é€šè¿‡ Ref ç›´æ¥è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</p>
          </div>
        </div>
      </div>
      <pre><code>&lt;!-- å­ç»„ä»¶æš´éœ²æ–¹æ³• --&gt;
&lt;script setup&gt;
const count = ref(0)

const increment = () => count.value++
const decrement = () => count.value--
const reset = () => count.value = 0

// ä½¿ç”¨ defineExpose æš´éœ²å±æ€§å’Œæ–¹æ³•
defineExpose({
  count,
  increment,
  decrement,
  reset
})
&lt;/script&gt;

&lt;!-- çˆ¶ç»„ä»¶ä¸­è®¿é—® --&gt;
&lt;script setup&gt;
const childRef = ref(null)

const callChildMethod = (method) => {
  if (childRef.value) {
    childRef.value[method]()
  }
}
&lt;/script&gt;

&lt;template&gt;
  &lt;ChildComponent ref="childRef" /&gt;
&lt;/template&gt;</code></pre>
    </section>

    <!-- 6. Slots æ’æ§½ -->
    <section class="demo-section">
      <h3>6ï¸âƒ£ Slotsï¼ˆå†…å®¹åˆ†å‘ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æ’å…¥ä»»æ„å†…å®¹</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> çµæ´»çš„å†…å®¹ç»„åˆï¼Œæ”¯æŒä½œç”¨åŸŸæ’æ§½</p>
      </div>
      <div class="demo-content">
        <div class="slots-demo">
          <div class="slot-example">
            <h4>é»˜è®¤æ’æ§½</h4>
            <div class="slot-container">
              <div class="slot-box">
                <p>ğŸ“Œ è¿™æ˜¯å­ç»„ä»¶çš„é»˜è®¤æ’æ§½å†…å®¹</p>
              </div>
            </div>
          </div>
          <div class="slot-example">
            <h4>å‘½åæ’æ§½</h4>
            <div class="slot-container">
              <div class="slot-box header">
                <strong>Header Slot</strong>
              </div>
              <div class="slot-box body">Body Slot Content</div>
              <div class="slot-box footer">Footer Slot</div>
            </div>
          </div>
          <div class="slot-example">
            <h4>ä½œç”¨åŸŸæ’æ§½</h4>
            <div class="slot-container">
              <div v-for="item in scopedItems" :key="item.id" class="slot-box scoped">
                <span class="badge">{{ item.category }}</span>
                <span>{{ item.name }}</span>
                <span class="value">Â¥{{ item.price }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <pre v-pre><code>&lt;!-- å­ç»„ä»¶ä¸­å®šä¹‰æ’æ§½ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;slot&gt;&lt;/slot&gt; &lt;!-- é»˜è®¤æ’æ§½ --&gt;
    &lt;slot name="header"&gt;&lt;/slot&gt; &lt;!-- å‘½åæ’æ§½ --&gt;
    &lt;slot name="item" v-for="item in items" :item="item"&gt;
      &lt;/slot&gt; &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨æ’æ§½ --&gt;
&lt;template&gt;
  &lt;ChildComponent&gt;
    &lt;!-- é»˜è®¤æ’æ§½å†…å®¹ --&gt;
    &lt;p&gt;è¿™æ˜¯é»˜è®¤æ’æ§½&lt;/p&gt;

    &lt;template #header&gt;
      &lt;h2&gt;Header Content&lt;/h2&gt;
    &lt;/template&gt;

    &lt;template #item="{ item }"&gt;
      &lt;span&gt;{{ item.name }}&lt;/span&gt;
    &lt;/template&gt;
  &lt;/ChildComponent&gt;
&lt;/template&gt;</code></pre>
    </section>

    <!-- 7. $attrs é€ä¼ å±æ€§ -->
    <section class="demo-section">
      <h3>7ï¸âƒ£ $attrsï¼ˆå±æ€§é€ä¼ ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> æœªè¢«å­ç»„ä»¶ Props æ¥æ”¶çš„æ‰€æœ‰ HTML å±æ€§å’Œäº‹ä»¶ç›‘å¬å™¨</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> ç”¨äºé«˜é˜¶ç»„ä»¶å’ŒåŒ…è£…ç»„ä»¶</p>
      </div>
      <div class="demo-content">
        <div class="attrs-demo">
          <div class="attrs-info">
            <h4>ä¼ é€’çš„å±æ€§ ($attrs)</h4>
            <div class="attrs-display">
              <p><strong>data-test:</strong> {{ attrsData['data-test'] }}</p>
              <p><strong>placeholder:</strong> {{ attrsData.placeholder }}</p>
              <p><strong>maxlength:</strong> {{ attrsData.maxlength }}</p>
            </div>
          </div>
          <div class="attrs-input">
            <input v-bind="attrsData" type="text" class="attrs-input-field" />
          </div>
        </div>
      </div>
      <pre v-pre><code>&lt;!-- å­ç»„ä»¶æ¥æ”¶ Props çš„åŒæ—¶é€ä¼ å…¶ä»–å±æ€§ --&gt;
&lt;script setup&gt;
defineProps(['title']) // åªæ¥æ”¶ title

// $attrs åŒ…å«å…¶ä»–æ‰€æœ‰å±æ€§
// å¯ä»¥é€šè¿‡ v-bind="$attrs" é€ä¼ ç»™åä»£å…ƒç´ 
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="wrapper"&gt;
    &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;!-- é€ä¼ æ‰€æœ‰æœªè¢«æ˜¾å¼å®šä¹‰çš„å±æ€§ --&gt;
    &lt;input v-bind="$attrs" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
&lt;ChildComponent
  title="è¾“å…¥æ¡†"
  placeholder="è¾“å…¥å†…å®¹"
  maxlength="50"
  data-test="input-field"
/&gt;</code></pre>
    </section>

    <!-- 8. Store å…¨å±€çŠ¶æ€ -->
    <section class="demo-section">
      <h3>8ï¸âƒ£ Storeï¼ˆå…¨å±€çŠ¶æ€ï¼‰</h3>
      <div class="description">
        <p><strong>å®šä¹‰ï¼š</strong> ä½¿ç”¨ Pinia åœ¨åº”ç”¨å…¨å±€èŒƒå›´å†…å…±äº«çŠ¶æ€</p>
        <p><strong>ç‰¹ç‚¹ï¼š</strong> é€‚åˆè·¨å¤šä¸ªç»„ä»¶å’Œé¡µé¢çš„æ•°æ®å…±äº«</p>
      </div>
      <div class="demo-content">
        <div class="store-demo">
          <div class="store-actions">
            <button @click="incrementStoreCounter" class="btn">å¢åŠ è®¡æ•°</button>
            <button @click="decrementStoreCounter" class="btn">å‡å°‘è®¡æ•°</button>
            <button @click="resetStoreCounter" class="btn">é‡ç½®è®¡æ•°</button>
          </div>
          <div class="store-info">
            <p><strong>å…¨å±€è®¡æ•°å™¨:</strong> {{ globalCounter }}</p>
            <p><strong>æ˜¯å¦ä¸ºå¶æ•°:</strong> {{ isEvenCounter ? 'âœ“ æ˜¯' : 'âœ— å¦' }}</p>
            <p class="status">âœ“ æ‰€æœ‰ç»„ä»¶éƒ½èƒ½è®¿é—®å’Œä¿®æ”¹è¿™ä¸ªçŠ¶æ€</p>
          </div>
        </div>
      </div>
      <pre><code>&lt;!-- åˆ›å»º Store (stores/counterStore.js) --&gt;
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useCounterStore = defineStore('counter', () => {
  const count = ref(0)

  const increment = () => count.value++
  const decrement = () => count.value--
  const reset = () => count.value = 0

  const isEven = computed(() => count.value % 2 === 0)

  return { count, increment, decrement, reset, isEven }
})

&lt;!-- åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨ --&gt;
&lt;script setup&gt;
import { useCounterStore } from '@/stores/counterStore'

const store = useCounterStore()
&lt;/script&gt;

&lt;template&gt;
  &lt;p&gt;&#123;&#123; store.count &#125;&#125;&lt;/p&gt;
  &lt;button @click="store.increment"&gt;å¢åŠ &lt;/button&gt;
&lt;/template&gt;</code></pre>
    </section>

    <!-- æ€»ç»“å¯¹æ¯” -->
    <section class="summary-section">
      <h3>ğŸ“Œ é€šä¿¡æ–¹å¼é€‰æ‹©æŒ‡å—</h3>
      <div class="guidelines">
        <div class="guideline-item">
          <h4>ğŸ“Š æ•°æ®å±‚çº§</h4>
          <ul>
            <li><strong>1-2 çº§ï¼š</strong> ä½¿ç”¨ Props â†”ï¸ Emit æˆ– v-model</li>
            <li><strong>3+ çº§ï¼š</strong> ä½¿ç”¨ Provide/Inject</li>
            <li><strong>è·¨é¡µé¢/ç»„ä»¶ï¼š</strong> ä½¿ç”¨ Store</li>
          </ul>
        </div>
        <div class="guideline-item">
          <h4>ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul>
            <li><strong>è¡¨å•è¾“å…¥ï¼š</strong> v-model</li>
            <li><strong>äº‹ä»¶é€šçŸ¥ï¼š</strong> emit</li>
            <li><strong>UI ç»„ä»¶ï¼š</strong> Slots</li>
            <li><strong>ä¸»é¢˜é…ç½®ï¼š</strong> Provide/Inject</li>
            <li><strong>ç”¨æˆ·è®¤è¯ï¼š</strong> Store</li>
          </ul>
        </div>
        <div class="guideline-item">
          <h4>âš ï¸ é¿å…è¯¯åŒº</h4>
          <ul>
            <li>âŒ ç›´æ¥ä¿®æ”¹ Propsï¼ˆæ”¹ä¸ºç”¨ emit æˆ– v-modelï¼‰</li>
            <li>âŒ è¿‡åº¦ä½¿ç”¨ $attrsï¼ˆä¼šé™ä½å¯è¯»æ€§ï¼‰</li>
            <li>âŒ æ»¥ç”¨ Ref è®¿é—®å­ç»„ä»¶ï¼ˆç ´åå°è£…ï¼‰</li>
            <li>âŒ ç®€å•çš„æ•°æ®ç”¨ Storeï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
  import { ref, computed, provide } from 'vue';
  import { useCounterStore } from '@/stores/counterStore';

  // 1. Props æ¼”ç¤ºæ•°æ®
  const parentData = ref({
    message: 'Hello Vue3!',
    count: 42,
    user: {
      name: 'å¼ ä¸‰',
      email: 'zhangsan@example.com',
    },
  });

  // 2. Emit æ¼”ç¤ºæ•°æ®
  const childMessage = ref('');
  const handleChildEvent = message => {
    childMessage.value = message;
  };

  // 3. v-model æ¼”ç¤ºæ•°æ®
  const article = ref({
    title: 'æ·±å…¥ç†è§£ Vue3 ç»„ä»¶é€šä¿¡',
    content: 'ä»Šå¤©æˆ‘ä»¬å­¦ä¹  Vue3 ä¸­çš„ 8 ç§ç»„ä»¶é€šä¿¡æ–¹å¼...',
  });

  // 4. Provide/Inject æ¼”ç¤º
  const provideData = ref({
    theme: 'purple',
  });

  const themeColor = computed(() => {
    const colors = {
      purple: '#667eea',
      blue: '#3b82f6',
      red: '#ef4444',
      green: '#10b981',
    };
    return colors[provideData.value.theme] || '#667eea';
  });

  const themeColorLight = computed(() => {
    const theme = provideData.value.theme;
    const colors = {
      purple: '#c5cae9',
      blue: '#bfdbfe',
      red: '#fecaca',
      green: '#a7f3d0',
    };
    return colors[theme] || '#c5cae9';
  });

  const themeColorLighter = computed(() => {
    const theme = provideData.value.theme;
    const colors = {
      purple: '#a7f3d0',
      blue: '#fecaca',
      red: '#bfdbfe',
      green: '#f0fdf4',
    };
    return colors[theme] || '#e8eaf6';
  });

  provide('injectedData', provideData);

  // 5. Ref/Expose æ¼”ç¤º
  const refDemoCounter = ref(0);
  const childRef = ref(null);

  const callChildMethod = method => {
    if (method === 'increment') refDemoCounter.value++;
    else if (method === 'decrement') refDemoCounter.value--;
    else if (method === 'reset') refDemoCounter.value = 0;
  };

  // 6. Slots æ¼”ç¤º
  const scopedItems = ref([
    { id: 1, name: 'ç¬”è®°æœ¬', category: 'ç”µå­', price: 8999 },
    { id: 2, name: 'é¼ æ ‡', category: 'é…ä»¶', price: 299 },
    { id: 3, name: 'é”®ç›˜', category: 'é…ä»¶', price: 599 },
  ]);

  // 7. $attrs æ¼”ç¤º
  const attrsData = ref({
    'data-test': 'demo-input',
    placeholder: 'è¾“å…¥ä½ çš„å†…å®¹...',
    maxlength: '50',
  });

  // 8. Store æ¼”ç¤º
  const store = useCounterStore();
  const globalCounter = computed(() => store.count);
  const isEvenCounter = computed(() => store.count % 2 === 0);

  const incrementStoreCounter = () => store.increment();
  const decrementStoreCounter = () => store.decrement();
  const resetStoreCounter = () => store.$reset();
</script>

<style scoped>
  .communication-demo {
    background: white;
    padding: 20px;
    height: 100%;
    overflow-y: auto;
  }

  .communication-demo h2 {
    text-align: center;
    color: #667eea;
    font-size: 2rem;
    margin-bottom: 10px;
  }

  .intro {
    text-align: center;
    color: #999;
    margin-bottom: 30px;
    font-size: 1.1rem;
  }

  /* å¯¹æ¯”è¡¨ */
  .comparison-section {
    margin-bottom: 40px;
  }

  .comparison-section h3 {
    color: #667eea;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
  }

  .table-wrapper {
    overflow-x: auto;
  }

  .comparison-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }

  .comparison-table thead {
    background: #667eea;
    color: white;
  }

  .comparison-table th {
    padding: 12px;
    text-align: left;
    font-weight: 600;
  }

  .comparison-table td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
  }

  .comparison-table tbody tr:hover {
    background: #f9fafb;
  }

  .comparison-table tr:last-child td {
    border-bottom: none;
  }

  /* Demo éƒ¨åˆ† */
  .demo-section {
    margin-bottom: 40px;
    padding: 25px;
    background: #f9fafb;
    border-radius: 8px;
    border-left: 4px solid #667eea;
  }

  .demo-section h3 {
    color: #667eea;
    margin-bottom: 15px;
    font-size: 1.3rem;
  }

  .description {
    background: white;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 20px;
    border-left: 4px solid #e8eaf6;
  }

  .description p {
    margin: 8px 0;
    color: #333;
    line-height: 1.6;
  }

  .demo-content {
    background: white;
    padding: 20px;
    border-radius: 6px;
    margin-bottom: 20px;
  }

  /* Props æ¼”ç¤º */
  .props-demo {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
  }

  .object-input {
    display: flex;
    gap: 10px;
  }

  .input {
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-size: 0.9rem;
    flex: 1;
  }

  .input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }

  .input-small {
    padding: 6px 10px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-size: 0.85rem;
    width: 120px;
  }

  .child-container {
    border: 2px dashed #667eea;
    padding: 15px;
    border-radius: 6px;
    background: #f0f4ff;
  }

  .comment {
    color: #999;
    font-size: 0.85rem;
    font-style: italic;
    margin-bottom: 10px;
  }

  .child-demo {
    padding: 10px;
    background: white;
    border-radius: 4px;
  }

  .child-demo p {
    margin: 8px 0;
    font-size: 0.95rem;
  }

  /* Emit æ¼”ç¤º */
  .emit-demo {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .btn {
    padding: 10px 20px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn:hover {
    background: #5568d3;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
  }

  .received-message {
    padding: 12px;
    background: #d4edda;
    color: #155724;
    border-left: 4px solid #28a745;
    border-radius: 4px;
  }

  /* v-model æ¼”ç¤º */
  .vmodel-demo {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    margin-bottom: 8px;
    font-weight: 600;
    color: #333;
  }

  .textarea {
    padding: 12px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-family: inherit;
    font-size: 0.95rem;
    min-height: 120px;
    resize: vertical;
  }

  .textarea:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }

  .char-count {
    font-size: 0.85rem;
    color: #999;
    margin-top: 4px;
  }

  .preview {
    padding: 15px;
    background: #f0f4ff;
    border-radius: 6px;
  }

  .preview h4 {
    margin: 0 0 12px 0;
    color: #667eea;
  }

  .preview-content {
    padding: 12px;
    background: white;
    border-radius: 4px;
    border-left: 4px solid #667eea;
  }

  .preview-content h5 {
    margin: 0 0 8px 0;
    color: #333;
  }

  .preview-content p {
    margin: 0;
    color: #666;
    line-height: 1.6;
  }

  /* Provide/Inject æ¼”ç¤º */
  .provide-demo {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .provide-box {
    padding: 20px;
    border: 2px solid #667eea;
    border-radius: 8px;
    background: white;
  }

  .provide-box h4 {
    color: #667eea;
    margin-top: 0;
  }

  .provide-box > p {
    margin: 0 0 15px 0;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .nested-box,
  .nested-box-2,
  .nested-box-3 {
    padding: 15px;
    border-radius: 6px;
    margin-top: 10px;
    color: white;
  }

  .nested-box p,
  .nested-box-2 p,
  .nested-box-3 p {
    margin: 8px 0;
    font-weight: 600;
  }

  .injected-value {
    background: rgba(255, 255, 255, 0.2);
    padding: 8px;
    border-radius: 4px;
    font-size: 0.9rem;
  }

  /* Ref/Expose æ¼”ç¤º */
  .ref-demo {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .result {
    padding: 15px;
    background: #e8eaf6;
    border-radius: 6px;
    border-left: 4px solid #667eea;
  }

  .result p {
    margin: 8px 0;
    color: #333;
    font-size: 0.95rem;
  }

  .status {
    color: #667eea;
    font-weight: 600;
  }

  /* Slots æ¼”ç¤º */
  .slots-demo {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .slot-example {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .slot-example h4 {
    color: #667eea;
    margin: 0;
  }

  .slot-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .slot-box {
    padding: 12px;
    background: #f0f4ff;
    border-radius: 4px;
    border-left: 4px solid #667eea;
    color: #333;
  }

  .slot-box.header {
    background: #e8eaf6;
  }

  .slot-box.body {
    background: #f0f4ff;
  }

  .slot-box.footer {
    background: #e8eaf6;
  }

  .slot-box.scoped {
    display: flex;
    align-items: center;
    gap: 10px;
    background: white;
    border: 1px solid #e5e7eb;
  }

  .badge {
    display: inline-block;
    padding: 2px 8px;
    background: #667eea;
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .value {
    margin-left: auto;
    color: #667eea;
    font-weight: 600;
  }

  /* $attrs æ¼”ç¤º */
  .attrs-demo {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .attrs-info {
    padding: 15px;
    background: #f0f4ff;
    border-radius: 6px;
  }

  .attrs-info h4 {
    color: #667eea;
    margin: 0 0 12px 0;
  }

  .attrs-display {
    padding: 12px;
    background: white;
    border-radius: 4px;
    border-left: 4px solid #667eea;
  }

  .attrs-display p {
    margin: 6px 0;
    font-size: 0.9rem;
  }

  .attrs-input {
    display: flex;
  }

  .attrs-input-field {
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    width: 100%;
    font-size: 0.95rem;
  }

  /* Store æ¼”ç¤º */
  .store-demo {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .store-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .store-info {
    padding: 15px;
    background: #e8eaf6;
    border-radius: 6px;
    border-left: 4px solid #667eea;
  }

  .store-info p {
    margin: 8px 0;
    color: #333;
    font-size: 0.95rem;
  }

  /* ä»£ç å— */
  pre {
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 15px;
    border-radius: 6px;
    overflow-x: auto;
    font-size: 0.85rem;
    line-height: 1.6;
    margin: 0;
  }

  code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  }

  /* æ€»ç»“éƒ¨åˆ† */
  .summary-section {
    background: #fff3e0;
    padding: 25px;
    border-radius: 8px;
    border-left: 4px solid #ff9800;
    margin-top: 40px;
  }

  .summary-section h3 {
    color: #e65100;
    margin-bottom: 20px;
  }

  .guidelines {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }

  .guideline-item {
    background: white;
    padding: 15px;
    border-radius: 6px;
  }

  .guideline-item h4 {
    color: #e65100;
    margin: 0 0 12px 0;
  }

  .guideline-item ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .guideline-item li {
    padding: 6px 0;
    color: #333;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  @media (max-width: 768px) {
    .communication-demo {
      padding: 20px;
    }

    .communication-demo h2 {
      font-size: 1.5rem;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 8px 4px;
      font-size: 0.85rem;
    }

    .demo-section {
      padding: 15px;
    }

    .object-input {
      flex-direction: column;
    }

    .controls {
      flex-direction: column;
    }

    .btn {
      width: 100%;
    }
  }
</style>
