<template>
  <div class="questions-section">
    <h2>ğŸŸ¨ JavaScript é¢è¯•é¢˜</h2>
    <p class="section-desc">åŒ…å«ES5/ES6+ã€å¼‚æ­¥ç¼–ç¨‹ã€è®¾è®¡æ¨¡å¼ç­‰ä¸­é«˜çº§å‰ç«¯JavaScripté¢è¯•é¢˜</p>

    <div class="questions-grid">
      <div
        class="question-card"
        v-for="(question, index) in questions"
        :key="question.id"
      >
        <div class="question-header">
          <h3 class="question-title">{{ question.title }}</h3>
          <div class="question-meta">
            <span class="difficulty" :class="question.difficulty">{{ question.difficulty }}</span>
            <span class="frequency">{{ question.frequency }}</span>
            <span class="company" v-if="question.company">{{ question.company }}</span>
          </div>
        </div>

        <div class="question-content" v-html="question.content"></div>

        <details class="answer-section" v-if="question.detailedAnswer">
          <summary>ğŸ“– è¯¦ç»†è§£ç­”</summary>
          <div class="answer-content" v-html="question.detailedAnswer"></div>
        </details>

        <div class="tags" v-if="question.tags">
          <span class="tag" v-for="tag in question.tags" :key="tag">{{ tag }}</span>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
const questions = [
  {
    id: 1,
    title: 'Q1: è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿé—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜…â˜…',
    company: 'å­—èŠ‚è·³åŠ¨',
    tags: ['é—­åŒ…', 'ä½œç”¨åŸŸ', 'å†…å­˜ç®¡ç†'],
    content: `
      <h5>å›ç­”è¦ç‚¹:</h5>
      <p><strong>é—­åŒ…å®šä¹‰:</strong>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚é€šå¸¸æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ã€‚</p>
      <h5>å½¢æˆæ¡ä»¶:</h5>
      <ul>
        <li>å‡½æ•°åµŒå¥—</li>
        <li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡</li>
        <li>å¤–éƒ¨å‡½æ•°è¢«è°ƒç”¨æ‰§è¡Œ</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>ç»å…¸ä¾‹å­:</h5>
      <div class="code-block"><pre>function outer() {
  let count = 0;
  return function inner() {
    count++;
    console.log(count);
  }
}

const counter = outer(); // outeræ‰§è¡Œå®Œæ¯•ï¼Œä½†countå˜é‡ä»è¢«innerå¼•ç”¨
counter(); // 1
counter(); // 2</pre></div>

      <h5>å®é™…åº”ç”¨åœºæ™¯:</h5>
      <ul>
        <li>ğŸ”’ <strong>ç§æœ‰å˜é‡å’Œæ–¹æ³•çš„å®ç°</strong></li>
        <li>ğŸ­ <strong>å‡½æ•°å·¥å‚æ¨¡å¼</strong></li>
        <li>â° <strong>é˜²æŠ–å’ŒèŠ‚æµå‡½æ•°</strong></li>
        <li>ğŸ£ <strong>æŸ¯é‡ŒåŒ–å‡½æ•°</strong></li>
        <li>ğŸ“¦ <strong>æ¨¡å—åŒ–å¼€å‘</strong></li>
      </ul>

      <h5>å†…å­˜æ³„æ¼é£é™©:</h5>
      <div class="code-block"><pre>function createLeak() {
  const data = new Array(1000000).fill('leak'); // å¤§å¯¹è±¡
  return function() {
    console.log(data.length); // é—­åŒ…å¼•ç”¨ï¼Œé€ æˆå†…å­˜æ³„æ¼
  };
}</pre></div>
    `
  },
  {
    id: 2,
    title: 'Q2: è§£é‡Šä¸€ä¸‹åŸå‹å’ŒåŸå‹é“¾',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜…â˜…',
    company: 'è…¾è®¯',
    tags: ['åŸå‹', 'åŸå‹é“¾', 'ç»§æ‰¿'],
    content: `
      <h5>æ ¸å¿ƒæ¦‚å¿µ:</h5>
      <ul>
        <li><strong>åŸå‹:</strong>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡</li>
        <li><strong>åŸå‹é“¾:</strong>å½“è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå¯¹è±¡æœ¬èº«æ²¡æœ‰ï¼Œä¼šæ²¿ç€ __proto__ å‘ä¸ŠæŸ¥æ‰¾</li>
        <li><strong>constructor:</strong>æŒ‡å‘æ„é€ å‡½æ•°</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>åŸå‹é“¾å…³ç³»å›¾:</h5>
      <div class="code-block"><pre>function Person(name) {
  this.name = name;
}

Person.prototype.sayHello = function() {
  console.log('Hello, ' + this.name);
};

const person = new Person('å¼ ä¸‰');

// åŸå‹é“¾: person -> Person.prototype -> Object.prototype -> null
console.log(person.__proto__ === Person.prototype); // true
console.log(Person.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__); // null</pre></div>

      <h5>å±æ€§æŸ¥æ‰¾è¿‡ç¨‹:</h5>
      <ol>
        <li>å…ˆåœ¨å¯¹è±¡è‡ªèº«å±æ€§ä¸ŠæŸ¥æ‰¾</li>
        <li>å¦‚æœæ²¡æœ‰ï¼Œæ²¿ç€__proto__å‘ä¸ŠæŸ¥æ‰¾</li>
        <li>ç›´åˆ°æ‰¾åˆ°æˆ–åˆ°è¾¾åŸå‹é“¾é¡¶ç«¯(null)</li>
      </ol>

      <h5>åŸå‹ç»§æ‰¿å®ç°:</h5>
      <div class="code-block"><pre>// æ–¹å¼1: æ„é€ å‡½æ•°ç»§æ‰¿
function Child(name, age) {
  Person.call(this, name);
  this.age = age;
}

// æ–¹å¼2: åŸå‹é“¾ç»§æ‰¿
Child.prototype = new Person();
Child.prototype.constructor = Child;</pre></div>
    `
  },
  {
    id: 3,
    title: 'Q3: è°ˆè°ˆä½ å¯¹thisçš„ç†è§£',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜…â˜…',
    company: 'é˜¿é‡Œ',
    tags: ['this', 'ä½œç”¨åŸŸ', 'ç»‘å®š'],
    content: `
      <h5>thisæŒ‡å‘è§„åˆ™:</h5>
      <ul>
        <li><strong>å…¨å±€ç¯å¢ƒ:</strong>æŒ‡å‘window/global</li>
        <li><strong>å‡½æ•°è°ƒç”¨:</strong>æŒ‡å‘window/global</li>
        <li><strong>æ–¹æ³•è°ƒç”¨:</strong>æŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡</li>
        <li><strong>æ„é€ å‡½æ•°:</strong>æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</li>
        <li><strong>ç®­å¤´å‡½æ•°:</strong>ä¸ç»‘å®šthisï¼Œç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„this</li>
        <li><strong>call/apply/bind:</strong>æ˜¾å¼ç»‘å®šthis</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>ç»å…¸é¢è¯•é¢˜:</h5>
      <div class="code-block"><pre>const obj = {
  name: 'obj',
  getName: function() {
    return this.name;
  },
  getNameArrow: () => {
    return this.name;
  }
};

const obj2 = { name: 'obj2' };

console.log(obj.getName()); // 'obj' - æ–¹æ³•è°ƒç”¨
console.log(obj.getName.call(obj2)); // 'obj2' - æ˜¾å¼ç»‘å®š
console.log(obj.getNameArrow()); // undefined - ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸ</pre></div>

      <h5>æ‰‹å†™bindå®ç°:</h5>
      <div class="code-block"><pre>Function.prototype.myBind = function(context, ...args) {
  const fn = this;
  return function(...newArgs) {
    return fn.apply(context, [...args, ...newArgs]);
  };
};

// ä½¿ç”¨ç¤ºä¾‹
const boundFn = obj.getName.myBind(obj2);
console.log(boundFn()); // 'obj2'</pre></div>

      <h5>ä¼˜å…ˆçº§é¡ºåº:</h5>
      <ol>
        <li>newç»‘å®š > æ˜¾å¼ç»‘å®š(call/apply/bind)</li>
        <li>æ˜¾å¼ç»‘å®š > éšå¼ç»‘å®š(æ–¹æ³•è°ƒç”¨)</li>
        <li>éšå¼ç»‘å®š > é»˜è®¤ç»‘å®š</li>
        <li>ç®­å¤´å‡½æ•° > ä»¥ä¸Šæ‰€æœ‰è§„åˆ™</li>
      </ol>
    `
  },
  {
    id: 4,
    title: 'Q4: Promiseçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ',
    difficulty: 'hard',
    frequency: 'â˜…â˜…â˜…â˜…â˜…',
    company: 'å­—èŠ‚è·³åŠ¨',
    tags: ['Promise', 'å¼‚æ­¥', 'çŠ¶æ€æœº'],
    content: `
      <h5>PromiseçŠ¶æ€:</h5>
      <ul>
        <li><strong>pending:</strong>åˆå§‹çŠ¶æ€ï¼Œå¯å˜ä¸ºfulfilledæˆ–rejected</li>
        <li><strong>fulfilled:</strong>æˆåŠŸçŠ¶æ€ï¼Œä¸å¯é€†</li>
        <li><strong>rejected:</strong>å¤±è´¥çŠ¶æ€ï¼Œä¸å¯é€†</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>æ‰‹å†™Promise:</h5>
      <div class="code-block"><pre>class MyPromise {
  constructor(executor) {
    this.state = 'pending';
    this.value = undefined;
    this.reason = undefined;
    this.onFulfilledCallbacks = [];
    this.onRejectedCallbacks = [];

    const resolve = (value) => {
      if (this.state === 'pending') {
        this.state = 'fulfilled';
        this.value = value;
        this.onFulfilledCallbacks.forEach(fn => fn());
      }
    };

    const reject = (reason) => {
      if (this.state === 'pending') {
        this.state = 'rejected';
        this.reason = reason;
        this.onRejectedCallbacks.forEach(fn => fn());
      }
    };

    try {
      executor(resolve, reject);
    } catch (error) {
      reject(error);
    }
  }

  then(onFulfilled, onRejected) {
    const promise2 = new MyPromise((resolve, reject) => {
      if (this.state === 'fulfilled') {
        setTimeout(() => {
          try {
            const x = onFulfilled(this.value);
            resolvePromise(promise2, x, resolve, reject);
          } catch (error) {
            reject(error);
          }
        });
      }

      if (this.state === 'rejected') {
        setTimeout(() => {
          try {
            const x = onRejected(this.reason);
            resolvePromise(promise2, x, resolve, reject);
          } catch (error) {
            reject(error);
          }
        });
      }

      if (this.state === 'pending') {
        this.onFulfilledCallbacks.push(() => {
          setTimeout(() => {
            try {
              const x = onFulfilled(this.value);
              resolvePromise(promise2, x, resolve, reject);
            } catch (error) {
              reject(error);
            }
          });
        });

        this.onRejectedCallbacks.push(() => {
          setTimeout(() => {
            try {
              const x = onRejected(this.reason);
              resolvePromise(promise2, x, resolve, reject);
            } catch (error) {
              reject(error);
            }
          });
        });
      }
    });

    return promise2;
  }
}</pre></div>

      <h5>Promiseæ–¹æ³•:</h5>
      <ul>
        <li><strong>Promise.all:</strong>æ‰€æœ‰PromiseæˆåŠŸæ‰æˆåŠŸ</li>
        <li><strong>Promise.race:</strong>æœ€å…ˆå®Œæˆçš„Promiseå†³å®šç»“æœ</li>
        <li><strong>Promise.allSettled:</strong>ç­‰å¾…æ‰€æœ‰Promiseå®Œæˆ</li>
        <li><strong>Promise.any:</strong>æœ€å…ˆæˆåŠŸçš„Promiseå†³å®šç»“æœ</li>
      </ul>
    `
  },
  {
    id: 5,
    title: 'Q5: è°ˆè°ˆäº‹ä»¶å¾ªç¯(Event Loop)çš„æœºåˆ¶',
    difficulty: 'hard',
    frequency: 'â˜…â˜…â˜…â˜…â˜†',
    company: 'ç¾å›¢',
    tags: ['Event Loop', 'å¼‚æ­¥', 'å®ä»»åŠ¡', 'å¾®ä»»åŠ¡'],
    content: `
      <h5>äº‹ä»¶å¾ªç¯æœºåˆ¶:</h5>
      <ul>
        <li><strong>è°ƒç”¨æ ˆ:</strong>æ‰§è¡ŒåŒæ­¥ä»£ç çš„åœ°æ–¹</li>
        <li><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—:</strong>Promise.thenã€MutationObserverã€process.nextTick</li>
        <li><strong>å®ä»»åŠ¡é˜Ÿåˆ—:</strong>setTimeoutã€setIntervalã€I/Oæ“ä½œã€UIæ¸²æŸ“</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>æ‰§è¡Œé¡ºåº:</h5>
      <div class="code-block"><pre>console.log('1');

setTimeout(() => {
  console.log('2');
  Promise.resolve().then(() => {
    console.log('3');
  });
});

Promise.resolve().then(() => {
  console.log('4');
});

console.log('5');

// è¾“å‡ºé¡ºåº: 1, 5, 4, 2, 3</pre></div>

      <h5>æ‰§è¡Œæµç¨‹:</h5>
      <ol>
        <li>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè°ƒç”¨æ ˆæ¸…ç©º</li>
        <li>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</li>
        <li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡</li>
        <li>å†æ¬¡æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</li>
        <li>é‡å¤æ­¥éª¤3-4</li>
      </ol>

      <h5>æµè§ˆå™¨ä¸Node.jsçš„åŒºåˆ«:</h5>
      <ul>
        <li><strong>æµè§ˆå™¨:</strong>å®ä»»åŠ¡åŒ…æ‹¬setTimeoutã€setIntervalã€requestAnimationFrameç­‰</li>
        <li><strong>Node.js:</strong>å®ä»»åŠ¡åŒ…æ‹¬setTimeoutã€setIntervalã€setImmediateç­‰</li>
        <li><strong>Node.jsé¢å¤–:</strong>process.nextTickä¼˜å…ˆçº§é«˜äºPromise</li>
      </ul>
    `
  },
  {
    id: 6,
    title: 'Q6: ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜…â˜†',
    company: 'äº¬ä¸œ',
    tags: ['é˜²æŠ–', 'èŠ‚æµ', 'æ€§èƒ½ä¼˜åŒ–'],
    content: `
      <h5>é˜²æŠ–(debounce):</h5>
      <p>åœ¨äº‹ä»¶è§¦å‘åï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´å†æ‰§è¡Œï¼Œå¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚</p>

      <h5>èŠ‚æµ(throttle):</h5>
      <p>åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡å‡½æ•°ï¼Œå¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™å¿½ç•¥ã€‚</p>
    `,
    detailedAnswer: `
      <h5>é˜²æŠ–å®ç°:</h5>
      <div class="code-block"><pre>function debounce(fn, delay) {
  let timer = null;
  return function(...args) {
    if (timer) clearTimeout(timer);
    timer = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}

// ä½¿ç”¨ç¤ºä¾‹
const debouncedSearch = debounce(searchAPI, 300);
input.addEventListener('input', debouncedSearch);</pre></div>

      <h5>èŠ‚æµå®ç°:</h5>
      <div class="code-block"><pre>// æ—¶é—´æˆ³ç‰ˆ
function throttle(fn, delay) {
  let lastTime = 0;
  return function(...args) {
    const now = Date.now();
    if (now - lastTime >= delay) {
      fn.apply(this, args);
      lastTime = now;
    }
  };
}

// å®šæ—¶å™¨ç‰ˆ
function throttle(fn, delay) {
  let timer = null;
  return function(...args) {
    if (!timer) {
      timer = setTimeout(() => {
        fn.apply(this, args);
        timer = null;
      }, delay);
    }
  };
}</pre></div>

      <h5>åº”ç”¨åœºæ™¯:</h5>
      <ul>
        <li><strong>é˜²æŠ–:</strong>æœç´¢æ¡†è¾“å…¥ã€çª—å£resizeã€æŒ‰é’®ç‚¹å‡»</li>
        <li><strong>èŠ‚æµ:</strong>æ»šåŠ¨äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨ã€é¢‘ç¹ç‚¹å‡»</li>
      </ul>
    `
  },
  {
    id: 7,
    title: 'Q7: è°ˆè°ˆæ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜…â˜†',
    company: 'å°ç±³',
    tags: ['æ·±æ‹·è´', 'æµ…æ‹·è´', 'å¯¹è±¡å¤åˆ¶'],
    content: `
      <h5>æµ…æ‹·è´:</h5>
      <p>åªå¤åˆ¶å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œå¯¹äºåµŒå¥—å¯¹è±¡ï¼Œåªæ˜¯å¤åˆ¶å¼•ç”¨ã€‚</p>

      <h5>æ·±æ‹·è´:</h5>
      <p>å®Œå…¨å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰åµŒå¥—å¯¹è±¡çš„å±æ€§ã€‚</p>
    `,
    detailedAnswer: `
      <h5>æµ…æ‹·è´å®ç°:</h5>
      <div class="code-block"><pre>// æ–¹æ³•1: Object.assign()
const obj = { a: 1, b: { c: 2 } };
const shallowCopy = Object.assign({}, obj);

// æ–¹æ³•2: æ‰©å±•è¿ç®—ç¬¦
const shallowCopy2 = { ...obj };

// æ–¹æ³•3: Array.slice() (æ•°ç»„)
const arr = [1, [2, 3]];
const shallowArr = arr.slice();</pre></div>

      <h5>æ·±æ‹·è´å®ç°:</h5>
      <div class="code-block"><pre>// æ–¹æ³•1: JSONåºåˆ—åŒ–ï¼ˆæ— æ³•å¤„ç†å‡½æ•°ã€undefinedç­‰ï¼‰
const deepCopy1 = JSON.parse(JSON.stringify(obj));

// æ–¹æ³•2: é€’å½’å®ç°
function deepClone(obj, map = new WeakMap()) {
  if (obj === null || typeof obj !== 'object') return obj;

  if (map.has(obj)) return map.get(obj);

  const clone = Array.isArray(obj) ? [] : {};
  map.set(obj, clone);

  for (let key in obj) {
    if (obj.hasOwnProperty(key)) {
      clone[key] = deepClone(obj[key], map);
    }
  }

  return clone;
}

// æ–¹æ³•3: ä½¿ç”¨åº“
import _ from 'lodash';
const deepCopy3 = _.cloneDeep(obj);</pre></div>

      <h5>æ€§èƒ½å¯¹æ¯”:</h5>
      <ul>
        <li><strong>æµ…æ‹·è´:</strong>æ€§èƒ½å¥½ï¼Œä½†å¯èƒ½å¯¼è‡´æ„å¤–ä¿®æ”¹</li>
        <li><strong>æ·±æ‹·è´:</strong>æ€§èƒ½å·®ï¼Œä½†ä¿è¯æ•°æ®ç‹¬ç«‹æ€§</li>
      </ul>
    `
  },
  {
    id: 8,
    title: 'Q8: async/awaitçš„å®ç°åŸç†',
    difficulty: 'hard',
    frequency: 'â˜…â˜…â˜…â˜…â˜†',
    company: 'å­—èŠ‚è·³åŠ¨',
    tags: ['async', 'await', 'Generator'],
    content: `
      <h5>async/awaitæ˜¯ä»€ä¹ˆ:</h5>
      <p>asyncå‡½æ•°æ˜¯Generatorå‡½æ•°çš„è¯­æ³•ç³–ï¼Œawaitç›¸å½“äºyieldã€‚</p>
    `,
    detailedAnswer: `
      <h5>asyncå‡½æ•°ç‰¹ç‚¹:</h5>
      <ul>
        <li>è‡ªåŠ¨è¿”å›Promiseå¯¹è±¡</li>
        <li>awaitåªèƒ½åœ¨asyncå‡½æ•°ä¸­ä½¿ç”¨</li>
        <li>awaitä¼šæš‚åœå‡½æ•°æ‰§è¡Œï¼Œç­‰å¾…Promiseè§£å†³</li>
        <li>é”™è¯¯å¤„ç†ä½¿ç”¨try/catch</li>
      </ul>

      <h5>ä½¿ç”¨ç¤ºä¾‹:</h5>
      <div class="code-block"><pre>async function fetchData() {
  try {
    const response = await fetch('/api/data');
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error);
  }
}

// ç­‰ä»·äºPromiseå†™æ³•
function fetchDataPromise() {
  return fetch('/api/data')
    .then(response => response.json())
    .catch(error => console.error('è·å–æ•°æ®å¤±è´¥:', error));
}</pre></div>

      <h5>Generatorå®ç°async/await:</h5>
      <div class="code-block"><pre>function asyncToGenerator(generatorFn) {
  return function() {
    const gen = generatorFn.apply(this, arguments);
    return new Promise((resolve, reject) => {
      function step(key, arg) {
        let info, value;
        try {
          info = gen[key](arg);
          value = info.value;
        } catch (error) {
          reject(error);
          return;
        }

        if (info.done) {
          resolve(value);
        } else {
          Promise.resolve(value).then(
            val => step('next', val),
            err => step('throw', err)
          );
        }
      }
      step('next');
    });
  };
}</pre></div>
    `
  },
  {
    id: 9,
    title: 'Q9: è°ˆè°ˆä½ å¯¹æ¨¡å—åŒ–çš„ç†è§£',
    difficulty: 'medium',
    frequency: 'â˜…â˜…â˜…â˜†â˜†',
    company: 'è…¾è®¯',
    tags: ['æ¨¡å—åŒ–', 'CommonJS', 'ES6 Modules'],
    content: `
      <h5>æ¨¡å—åŒ–å‘å±•å†ç¨‹:</h5>
      <ul>
        <li><strong>æ— æ¨¡å—åŒ–:</strong>å…¨å±€å˜é‡æ±¡æŸ“ï¼Œä¾èµ–å…³ç³»æ··ä¹±</li>
        <li><strong>IIFE:</strong>ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</li>
        <li><strong>CommonJS:</strong>Node.jsè§„èŒƒï¼ŒåŒæ­¥åŠ è½½</li>
        <li><strong>AMD:</strong>RequireJSï¼Œå¼‚æ­¥åŠ è½½</li>
        <li><strong>CMD:</strong>SeaJSï¼ŒæŒ‰éœ€åŠ è½½</li>
        <li><strong>ES6 Modules:</strong>å®˜æ–¹æ ‡å‡†ï¼Œé™æ€åˆ†æ</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>CommonJS vs ES6 Modules:</h5>
      <table class="comparison-table">
        <tr><th>ç‰¹æ€§</th><th>CommonJS</th><th>ES6 Modules</th></tr>
        <tr><td>åŠ è½½æ–¹å¼</td><td>è¿è¡Œæ—¶åŠ è½½</td><td>ç¼–è¯‘æ—¶åŠ è½½</td></tr>
        <tr><td>å¯¼å…¥å¯¼å‡º</td><td>module.exports/require</td><td>export/import</td></tr>
        <tr><td>æ‰§è¡Œæ—¶æœº</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td></tr>
        <tr><td>Tree Shaking</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr>
        <tr><td>å¾ªç¯ä¾èµ–</td><td>æ”¯æŒä½†æœ‰é£é™©</td><td>æŠ¥é”™</td></tr>
      </table>

      <h5>ES6 Modulesç¤ºä¾‹:</h5>
      <div class="code-block"><pre>// math.js
export const PI = 3.14159;
export function add(a, b) { return a + b; }
export default function multiply(a, b) { return a * b; }

// main.js
import multiply, { PI, add } from './math.js';
console.log(add(1, 2)); // 3
console.log(multiply(3, 4)); // 12</pre></div>

      <h5>Tree Shaking:</h5>
      <p>ES6 Modulesçš„é™æ€åˆ†æç‰¹æ€§ä½¿å¾—æ„å»ºå·¥å…·èƒ½å¤Ÿåˆ†æå“ªäº›ä»£ç è¢«ä½¿ç”¨ï¼Œè‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚</p>
    `
  },
  {
    id: 10,
    title: 'Q10: ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ',
    difficulty: 'hard',
    frequency: 'â˜…â˜…â˜…â˜†â˜†',
    company: 'åä¸º',
    tags: ['è®¾è®¡æ¨¡å¼', 'é¢å‘å¯¹è±¡', 'æ¶æ„'],
    content: `
      <h5>è®¾è®¡æ¨¡å¼åˆ†ç±»:</h5>
      <ul>
        <li><strong>åˆ›å»ºå‹:</strong>å¯¹è±¡å®ä¾‹åŒ–</li>
        <li><strong>ç»“æ„å‹:</strong>ç±»å’Œå¯¹è±¡ç»„åˆ</li>
        <li><strong>è¡Œä¸ºå‹:</strong>å¯¹è±¡é—´é€šä¿¡</li>
      </ul>
    `,
    detailedAnswer: `
      <h5>å¸¸ç”¨è®¾è®¡æ¨¡å¼:</h5>
      <h6>åˆ›å»ºå‹æ¨¡å¼:</h6>
      <ul>
        <li><strong>å•ä¾‹æ¨¡å¼:</strong>ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹</li>
        <li><strong>å·¥å‚æ¨¡å¼:</strong>åˆ›å»ºå¯¹è±¡çš„æ¥å£</li>
        <li><strong>å»ºé€ è€…æ¨¡å¼:</strong>åˆ†ç¦»å¤æ‚å¯¹è±¡çš„æ„å»º</li>
      </ul>

      <h6>ç»“æ„å‹æ¨¡å¼:</h6>
      <ul>
        <li><strong>è£…é¥°å™¨æ¨¡å¼:</strong>åŠ¨æ€æ·»åŠ åŠŸèƒ½</li>
        <li><strong>é€‚é…å™¨æ¨¡å¼:</strong>æ¥å£è½¬æ¢</li>
        <li><strong>ä»£ç†æ¨¡å¼:</strong>æ§åˆ¶è®¿é—®</li>
      </ul>

      <h6>è¡Œä¸ºå‹æ¨¡å¼:</h6>
      <ul>
        <li><strong>è§‚å¯Ÿè€…æ¨¡å¼:</strong>ä¸€å¯¹å¤šä¾èµ–å…³ç³»</li>
        <li><strong>ç­–ç•¥æ¨¡å¼:</strong>ç®—æ³•å°è£…</li>
        <li><strong>çŠ¶æ€æ¨¡å¼:</strong>çŠ¶æ€è½¬æ¢</li>
      </ul>

      <h5>å•ä¾‹æ¨¡å¼å®ç°:</h5>
      <div class="code-block"><pre>// é¥¿æ±‰å¼
class Singleton {
  static instance = new Singleton();
  static getInstance() {
    return this.instance;
  }
}

// æ‡’æ±‰å¼
class Singleton {
  static instance = null;
  static getInstance() {
    if (!this.instance) {
      this.instance = new Singleton();
    }
    return this.instance;
  }
}</pre></div>

      <h5>è§‚å¯Ÿè€…æ¨¡å¼å®ç°:</h5>
      <div class="code-block"><pre>class EventEmitter {
  constructor() {
    this.events = {};
  }

  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
  }

  emit(event, ...args) {
    if (this.events[event]) {
      this.events[event].forEach(callback => callback(...args));
    }
  }

  off(event, callback) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(cb => cb !== callback);
    }
  }
}</pre></div>
    `
  }
]
</script>

<style scoped>
.questions-section {
  padding: 20px;
}

.section-desc {
  color: #666;
  margin-bottom: 30px;
  font-size: 16px;
}

.questions-grid {
  display: grid;
  gap: 20px;
}

.question-card {
  background: white;
  border: 1px solid #e9ecef;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.question-card:hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}

.question-header {
  margin-bottom: 16px;
}

.question-title {
  color: #2c3e50;
  margin-bottom: 12px;
  font-size: 20px;
  font-weight: 600;
}

.question-meta {
  display: flex;
  gap: 12px;
  align-items: center;
}

.difficulty {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: bold;
  text-transform: uppercase;
}

.difficulty.easy { background: #d4edda; color: #155724; }
.difficulty.medium { background: #fff3cd; color: #856404; }
.difficulty.hard { background: #f8d7da; color: #721c24; }

.frequency {
  color: #6c757d;
  font-weight: bold;
}

.company {
  background: #e9ecef;
  color: #495057;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}

.question-content {
  line-height: 1.7;
  margin-bottom: 16px;
}

.question-content h5 {
  color: #495057;
  margin: 20px 0 10px 0;
  font-size: 16px;
  font-weight: 600;
}

.question-content p {
  margin: 12px 0;
}

.question-content ul, .question-content ol {
  margin: 12px 0;
  padding-left: 24px;
}

.question-content li {
  margin: 6px 0;
}

.answer-section {
  margin-top: 20px;
  border-top: 1px solid #e9ecef;
  padding-top: 20px;
}

.answer-section summary {
  cursor: pointer;
  font-weight: bold;
  color: #007bff;
  margin-bottom: 12px;
}

.answer-section summary:hover {
  color: #0056b3;
}

.answer-content {
  line-height: 1.7;
}

.code-block {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 6px;
  padding: 16px;
  margin: 12px 0;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  overflow-x: auto;
  line-height: 1.5;
}

.tags {
  margin-top: 16px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag {
  background: #007bff;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0;
}

.comparison-table th, .comparison-table td {
  border: 1px solid #dee2e6;
  padding: 8px 12px;
  text-align: left;
}

.comparison-table th {
  background: #f8f9fa;
  font-weight: bold;
}
</style>