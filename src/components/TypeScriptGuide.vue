<template>
  <div class="ts-guide">
    <div class="guide-header">
      <h1>ğŸŸ¦ TypeScript é‡ç‚¹è¯¦è§£ï¼ˆé€šä¿— + å…¨é¢ï¼‰</h1>
      <p class="subtitle">æŠŠ JavaScript å˜â€œå¯é¢„æœŸâ€ï¼šç±»å‹ç³»ç»Ÿ + æ›´å¥½çš„å·¥ç¨‹èƒ½åŠ›</p>
    </div>

    <div class="guide-content">
      <section class="guide-section">
        <h2>1ï¸âƒ£ TypeScript æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ</h2>
        <div class="content-box">
          <p>
            <strong>TypeScript (TS)</strong> æ˜¯ JavaScript çš„è¶…é›†ï¼šä½ å†™çš„ TS æœ€ç»ˆä¼šç¼–è¯‘æˆ JS è¿è¡Œã€‚
            TS çš„æ ¸å¿ƒä»·å€¼ä¸æ˜¯â€œè¯­æ³•æ›´èŠ±â€ï¼Œè€Œæ˜¯ <strong>ç±»å‹ç³»ç»Ÿ</strong> å¸®ä½ æå‰å‘ç°é”™è¯¯ã€æå‡é‡æ„ä¿¡å¿ƒã€æé«˜å›¢é˜Ÿåä½œæ•ˆç‡ã€‚
          </p>
          <ul class="feature-list">
            <li><strong>æ›´å°‘çº¿ä¸Š Bug</strong>ï¼šå¾ˆå¤šâ€œundefined è®¿é—®å±æ€§â€ã€â€œå‚æ•°ä¼ é”™ç±»å‹â€åœ¨ç¼–è¯‘æœŸå°±æŠ¥é”™</li>
            <li><strong>æ›´å®¹æ˜“é‡æ„</strong>ï¼šæ”¹å­—æ®µåã€æ”¹å‚æ•°ï¼ŒIDE + ç±»å‹ç³»ç»Ÿèƒ½å¸®ä½ å…¨å±€å®šä½</li>
            <li><strong>æ›´å¥½çš„æç¤º</strong>ï¼šè‡ªåŠ¨è¡¥å…¨ã€è·³è½¬å®šä¹‰ã€æ™ºèƒ½æç¤ºæ›´å‡†ç¡®</li>
            <li><strong>æ›´æ¸…æ™°çš„å¥‘çº¦</strong>ï¼šæ¥å£/ç±»å‹å°±æ˜¯æ–‡æ¡£ï¼Œå‰åç«¯/æ¨¡å—ä¹‹é—´æ²Ÿé€šæˆæœ¬æ›´ä½</li>
          </ul>
        </div>
      </section>

      <section class="guide-section">
        <h2>2ï¸âƒ£ å…ˆæŠŠè¿™å‡ ä¸ªâ€œç±»å‹åŸºç¡€â€åƒé€</h2>
        <div class="content-box">
          <h3>2.1 åŸå§‹ç±»å‹ / æ•°ç»„ / å…ƒç»„</h3>
          <pre v-pre class="code-block"><code>let a: number = 1
let b: string = 'hi'
let c: boolean = true
let d: null = null
let e: undefined = undefined

let list: number[] = [1, 2, 3]
let list2: Array&lt;number&gt; = [1, 2, 3]

// å…ƒç»„ï¼šå›ºå®šé•¿åº¦ + å›ºå®šä½ç½®ç±»å‹
let tuple: [number, string] = [1, 'ok']</code></pre>

          <h3>2.2 any / unknown / neverï¼ˆé¢è¯•é«˜é¢‘ & çœŸæ­£æœ‰ç”¨ï¼‰</h3>
          <pre v-pre class="code-block"><code>// anyï¼šæ”¾å¼ƒç±»å‹æ£€æŸ¥ï¼ˆå°½é‡å°‘ç”¨ï¼‰
let x: any = 1
x.foo.bar()  // ä¸æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶å¯èƒ½ç‚¸

// unknownï¼šä¸çŸ¥é“ç±»å‹ï¼Œä½†å¿…é¡»â€œç¼©å°â€åæ‰èƒ½ç”¨ï¼ˆæ¨èï¼‰
let y: unknown = JSON.parse('{"a":1}')
if (typeof y === 'object' && y !== null) {
  // ä»ç„¶éœ€è¦æ›´ç²¾ç¡®çš„åˆ¤æ–­æˆ–æ–­è¨€
}

// neverï¼šæ°¸è¿œä¸å¯èƒ½å‘ç”Ÿï¼ˆé€šå¸¸æ¥è‡ªâ€œç©·å°½æ£€æŸ¥â€ï¼‰
function assertNever(v: never): never {
  throw new Error('Unexpected: ' + v)
}</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>3ï¸âƒ£ type vs interfaceï¼šæ€ä¹ˆé€‰ï¼Ÿ</h2>
        <div class="content-box">
          <p>ä¸€å¥è¯ï¼šä¸¤è€…éƒ½èƒ½æè¿°å¯¹è±¡ç»“æ„ï¼Œå›¢é˜Ÿç»Ÿä¸€é£æ ¼æœ€é‡è¦ï¼›ä½†æœ‰ä¸€äº›å¸¸è§é€‰æ‹©å»ºè®®ï¼š</p>
          <ul class="feature-list">
            <li><strong>interface</strong>ï¼šæ›´é€‚åˆâ€œå¯¹è±¡å½¢çŠ¶â€ã€å¯è¢«æ‰©å±•ï¼ˆextendsï¼‰ã€å¯å£°æ˜åˆå¹¶ï¼ˆdeclaration mergingï¼‰</li>
            <li><strong>type</strong>ï¼šæ›´é€‚åˆâ€œè”åˆ/äº¤å‰/æ˜ å°„/æ¡ä»¶ç±»å‹â€ç­‰ç±»å‹è¿ç®—</li>
          </ul>

          <pre v-pre class="code-block"><code>// interface
interface User {
  id: number
  name: string
}

interface Admin extends User {
  role: 'admin'
}

// type
type ID = string | number
type ApiResult&lt;T&gt; = { code: number; data: T; message?: string }</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>4ï¸âƒ£ è”åˆç±»å‹ + ç±»å‹ç¼©å°ï¼ˆTS çœŸæ­£çš„â€œçˆ½ç‚¹â€ï¼‰</h2>
        <div class="content-box">
          <h3>4.1 è”åˆç±»å‹</h3>
          <pre v-pre class="code-block"><code>type Status = 'idle' | 'loading' | 'success' | 'error'
let status: Status = 'idle'</code></pre>

          <h3>4.2 ç¼©å°ï¼štypeof / in / instanceof / è‡ªå®šä¹‰ç±»å‹å®ˆå«</h3>
          <pre v-pre class="code-block"><code>function format(input: string | number) {
  if (typeof input === 'string') {
    return input.toUpperCase()
  }
  return input.toFixed(2)
}

type Cat = { kind: 'cat'; meow: () =&gt; void }
type Dog = { kind: 'dog'; bark: () =&gt; void }
type Pet = Cat | Dog

function play(pet: Pet) {
  if (pet.kind === 'cat') pet.meow()
  else pet.bark()
}</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>5ï¸âƒ£ æ³›å‹ï¼ˆGenericï¼‰ï¼šå†™ä¸€æ¬¡ï¼Œé€‚é…å¤šç§ç±»å‹</h2>
        <div class="content-box">
          <pre v-pre class="code-block"><code>// æ³›å‹å‡½æ•°
function first&lt;T&gt;(arr: T[]): T | undefined {
  return arr[0]
}

// æ³›å‹æ¥å£/ç±»å‹
type Page&lt;T&gt; = {
  list: T[]
  page: number
  pageSize: number
  total: number
}

// æ³›å‹çº¦æŸ
function getId&lt;T extends { id: number }&gt;(obj: T) {
  return obj.id
}</code></pre>
          <p><strong>å¸¸è§è¯¯åŒºï¼š</strong>æ³›å‹ä¸æ˜¯â€œæ›´å¤æ‚â€ï¼Œè€Œæ˜¯â€œæ›´å¤ç”¨ + æ›´å‡†ç¡®â€ã€‚</p>
        </div>
      </section>

      <section class="guide-section">
        <h2>6ï¸âƒ£ Utility Typesï¼ˆå·¥å…·ç±»å‹ï¼‰ï¼šTS æ ‡é…ç‘å£«å†›åˆ€</h2>
        <div class="content-box">
          <pre v-pre class="code-block"><code>interface User {
  id: number
  name: string
  age?: number
}

type UserRequired = Required&lt;User&gt;
type UserPartial = Partial&lt;User&gt;
type UserPick = Pick&lt;User, 'id' | 'name'&gt;
type UserOmit = Omit&lt;User, 'age'&gt;
type UserReadonly = Readonly&lt;User&gt;

type Keys = keyof User  // 'id' | 'name' | 'age'</code></pre>
          <p>è¿™äº›å·¥å…·ç±»å‹åœ¨â€œè¡¨å•ç¼–è¾‘ã€æ¥å£è¿”å›ã€DTO è½¬æ¢ã€Patch æ›´æ–°â€åœºæ™¯éå¸¸å¸¸è§ã€‚</p>
        </div>
      </section>

      <section class="guide-section">
        <h2>7ï¸âƒ£ å‡½æ•°ç±»å‹ï¼šå‚æ•°ã€è¿”å›å€¼ã€é‡è½½</h2>
        <div class="content-box">
          <h3>7.1 å‡½æ•°ç­¾å</h3>
          <pre v-pre class="code-block"><code>type Fn = (a: number, b: number) =&gt; number
const add: Fn = (a, b) =&gt; a + b</code></pre>

          <h3>7.2 å‡½æ•°é‡è½½ï¼ˆå¯¹å¤–å¤šä¸ªç­¾åï¼Œå¯¹å†…ä¸€ä¸ªå®ç°ï¼‰</h3>
          <pre v-pre class="code-block"><code>function toArray(x: string): string[]
function toArray(x: number): number[]
function toArray(x: string | number) {
  return [x]
}</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>8ï¸âƒ£ å¯¹è±¡ç±»å‹è¿›é˜¶ï¼šç´¢å¼•ç­¾åã€Recordã€å¯é€‰é“¾ä¸ç©ºå€¼å¤„ç†</h2>
        <div class="content-box">
          <pre v-pre class="code-block"><code>// ç´¢å¼•ç­¾åï¼šé”®å€¼è¡¨
type Dict = { [key: string]: string }
const dict: Dict = { a: '1' }

// Recordï¼šæ›´æ¨èçš„â€œé”®å€¼è¡¨â€
type Role = 'admin' | 'user'
type RoleName = Record&lt;Role, string&gt;
const roleName: RoleName = { admin: 'ç®¡ç†å‘˜', user: 'æ™®é€šç”¨æˆ·' }

// å¯é€‰é“¾ + ç©ºå€¼åˆå¹¶
type Profile = { avatar?: { url?: string } }
const p: Profile = {}
const url = p.avatar?.url ?? 'default.png'</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>9ï¸âƒ£ TS åœ¨ Vue3 é‡Œæ€ä¹ˆå†™ï¼ˆæœ€å®ç”¨ï¼‰</h2>
        <div class="content-box">
          <h3>9.1 script setup + defineProps/defineEmits</h3>
          <pre v-pre class="code-block"><code>&lt;script setup lang=\"ts\"&gt;
type User = { id: number; name: string }

const props = defineProps&lt;{
  user: User
  disabled?: boolean
}&gt;()

const emit = defineEmits&lt;{
  (e: 'save', user: User): void
  (e: 'cancel'): void
}&gt;()

function onSave() {
  emit('save', props.user)
}
&lt;/script&gt;</code></pre>

          <h3>9.2 ref çš„ç±»å‹ï¼ˆå¸¸è§å‘ï¼‰</h3>
          <pre v-pre class="code-block"><code>import { ref } from 'vue'

const count = ref(0)          // Ref&lt;number&gt;
const input = ref&lt;HTMLInputElement | null&gt;(null)

// è®¿é—® DOM æ—¶æ³¨æ„ null
input.value?.focus()</code></pre>
        </div>
      </section>

      <section class="guide-section">
        <h2>ğŸ”Ÿ tsconfig å…³é”®é…ç½®ï¼ˆåˆ«èƒŒï¼Œç†è§£å³å¯ï¼‰</h2>
        <div class="content-box">
          <pre v-pre class="code-block"><code>{
  \"compilerOptions\": {
    \"target\": \"ES2020\",
    \"module\": \"ESNext\",
    \"moduleResolution\": \"Bundler\",
    \"strict\": true,
    \"noImplicitAny\": true,
    \"skipLibCheck\": true,
    \"baseUrl\": \".\",
    \"paths\": {
      \"@/*\": [\"src/*\"]
    }
  }
}</code></pre>
          <ul class="feature-list">
            <li><strong>strict</strong>ï¼šå¼ºçƒˆå»ºè®®å¼€å¯ï¼ˆçœŸæ­£å‘æŒ¥ TS ä»·å€¼ï¼‰</li>
            <li><strong>skipLibCheck</strong>ï¼šå‡å°‘ç¬¬ä¸‰æ–¹å£°æ˜æ–‡ä»¶å¸¦æ¥çš„å™ªéŸ³</li>
            <li><strong>paths</strong>ï¼šé…åˆ Vite aliasï¼Œæå‡å¯¼å…¥ä½“éªŒ</li>
          </ul>
        </div>
      </section>

      <section class="guide-section">
        <h2>1ï¸âƒ£1ï¸âƒ£ å¸¸è§é”™è¯¯ä¸æœ€ä½³å®è·µï¼ˆå¾ˆé‡è¦ï¼‰</h2>
        <div class="content-box">
          <ul class="practice-list">
            <li><strong>1. å°‘ç”¨ any</strong>ï¼šèƒ½ç”¨ unknown + ç¼©å°å°±åˆ«ç”¨ any</li>
            <li><strong>2. ç”¨å­—é¢é‡è”åˆæ›¿ä»£é­”æ³•å­—ç¬¦ä¸²</strong>ï¼šå¦‚ statusã€role</li>
            <li><strong>3. API è¿”å›ç»Ÿä¸€å°è£…ç±»å‹</strong>ï¼šApiResult&lt;T&gt;</li>
            <li><strong>4. ä¼˜å…ˆç±»å‹ç¼©å°ï¼Œè€Œä¸æ˜¯ as æ–­è¨€</strong>ï¼šæ–­è¨€ä¼šç»•è¿‡æ£€æŸ¥</li>
            <li><strong>5. å¤æ‚å¯¹è±¡ç±»å‹ä¼˜å…ˆ interface + extends</strong>ï¼šæ›´æ˜“ç»´æŠ¤</li>
            <li><strong>6. ç”¨ eslint + typescript-eslint ç»Ÿä¸€è§„èŒƒ</strong></li>
          </ul>
        </div>
      </section>

      <section class="guide-section">
        <h2>1ï¸âƒ£2ï¸âƒ£ FAQï¼ˆä½ å¤§æ¦‚ç‡ä¼šé‡åˆ°ï¼‰</h2>
        <div class="content-box">
          <div class="qa-item">
            <h4>Q: â€œç±»å‹ä½“æ“â€è¦å­¦åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</h4>
            <p>A: æ—¥å¸¸ä¸šåŠ¡æŠŠâ€œè”åˆç±»å‹ã€æ³›å‹ã€å·¥å…·ç±»å‹ã€ç¼©å°â€åƒé€å°±å¤Ÿäº†ï¼›æ¡ä»¶ç±»å‹/æ˜ å°„ç±»å‹å±äºè¿›é˜¶åŠ åˆ†é¡¹ã€‚</p>
          </div>
          <div class="qa-item">
            <h4>Q: ä¸ºä»€ä¹ˆæˆ‘è§‰å¾— TS å¾ˆçƒ¦ï¼Ÿ</h4>
            <p>A: é€šå¸¸æ˜¯ç±»å‹è®¾è®¡ä¸åˆç†æˆ– strict æ²¡å¼€å…¨ï¼›æ­£ç¡®çš„ç±»å‹ä¼šè®©ä½ è¶Šå†™è¶Šçœå¿ƒï¼Œè€Œä¸æ˜¯è¶Šå†™è¶Šç´¯ã€‚</p>
          </div>
          <div class="qa-item">
            <h4>Q: æ€ä¹ˆç»™ç¬¬ä¸‰æ–¹åº“è¡¥ç±»å‹ï¼Ÿ</h4>
            <p>A: ä¼˜å…ˆæ‰¾ @typesï¼›æ²¡æœ‰çš„è¯åœ¨é¡¹ç›®é‡Œå†™ d.ts å£°æ˜æ–‡ä»¶ï¼ˆdeclare module ...ï¼‰ã€‚</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup>
// TypeScript æ•™å­¦æ–‡æ¡£é¡µ
</script>

<style scoped>
.ts-guide {
  background: white;
  padding: 20px;
  min-height: 100%;
  height: 100%;
  overflow-y: auto;
}

.guide-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
}

.guide-header h1 {
  font-size: 2rem;
  margin-bottom: 10px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.guide-header .subtitle {
  font-size: 1.1rem;
  opacity: 0.9;
  margin-bottom: 0;
}

.guide-content {
  padding: 0;
}

.guide-section {
  margin-bottom: 40px;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 30px;
}

.guide-section:last-child {
  border-bottom: none;
}

.guide-section h2 {
  color: #667eea;
  font-size: 1.5rem;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid #667eea;
}

.guide-section h3 {
  color: #555;
  font-size: 1.2rem;
  margin-top: 25px;
  margin-bottom: 15px;
}

.guide-section h4 {
  color: #666;
  font-size: 1rem;
  margin-bottom: 10px;
}

.content-box {
  background: #f9f9f9;
  padding: 20px;
  border-radius: 8px;
  border-left: 4px solid #667eea;
}

.content-box p {
  line-height: 1.8;
  color: #333;
  margin-bottom: 15px;
}

.feature-list {
  list-style: none;
  padding: 0;
  margin: 15px 0;
}

.feature-list li {
  padding: 8px 0;
  color: #555;
  line-height: 1.6;
}

.practice-list {
  list-style: none;
  padding: 0;
}

.practice-list li {
  padding: 12px 0;
  border-bottom: 1px solid #e0e0e0;
  line-height: 1.8;
  color: #555;
}

.practice-list li:last-child {
  border-bottom: none;
}

.practice-list strong {
  color: #667eea;
}

.qa-item {
  background: white;
  padding: 15px;
  border-radius: 6px;
  margin-bottom: 15px;
  border-left: 4px solid #667eea;
}

.qa-item h4 {
  color: #667eea;
  margin-bottom: 10px;
}

.qa-item p {
  color: #666;
  line-height: 1.6;
  margin: 0;
}

.code-block {
  background: #2d2d2d;
  color: #f8f8f2;
  padding: 20px;
  border-radius: 6px;
  overflow-x: auto;
  margin: 15px 0;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.6;
}

.code-block code {
  color: #f8f8f2;
  white-space: pre;
}

.code-snippet {
  background: #2d2d2d;
  color: #f8f8f2;
  padding: 12px;
  border-radius: 4px;
  overflow-x: auto;
  margin: 10px 0;
  font-family: 'Courier New', monospace;
  font-size: 13px;
}

.code-snippet code {
  color: #f8f8f2;
}

@media (max-width: 768px) {
  .ts-guide {
    padding: 15px;
  }

  .guide-header h1 {
    font-size: 1.5rem;
  }

  .code-block {
    font-size: 12px;
    padding: 15px;
  }
}
</style>
